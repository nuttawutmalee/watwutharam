webpackJsonp([6],{943:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(988);a.d(t,"ControlsModule",(function(){return n.a}))},951:function(e,t,a){"use strict";var n=a(19),i=a(26),r=a(12),o=a(35);a.d(t,"a",(function(){return c}));var c=(function(){function e(e){this._inj=e,this._pageTitle="",this._siteList=[],this._reqSvc=this._inj.get(n.a),this._router=this._inj.get(i.c),this._cmn=this._inj.get(r.a),this._dlg=this._inj.get(o.a)}return e.prototype.ngOnInit=function(){this._cmn.setInfo({navList:[]})},e.prototype.ngOnDestroy=function(){},e})()},952:function(e,t){e.exports='<div class="cmp-container">\r\n\t<router-outlet></router-outlet>\r\n</div>\r\n'},956:function(e,t,a){"use strict";var n=a(4),i=a(2),r=a(419),o=a(9),c=a(16);a.d(t,"a",(function(){return s}));var s=(function(e){function t(t){var a=e.call(this,t)||this;return a._ignoreSelectDeselectEvent=!1,a.parentControlInheritanceName="app_nav.control_inheritance",a.moduleType=o.l.CONTROL_INHERITANCES,a.moduleTypeName=a.moduleType.replace(/(_)/g," "),a.pageType=o.x.MAIN_LIST,a.tableType=o.y.MODULE,a._acRoute.params.subscribe((function(e){if(e.id){a.parentId=e.id;var t=Object.assign({},c.a.url.control.getInheritancesById);t.url=t.url.replace(/(:id)/g,a.parentId),window.sessionStorage.getItem("tmp-control-inheritance-parent-name")&&(a.parentControlInheritanceName=window.sessionStorage.getItem("tmp-control-inheritance-parent-name"),window.sessionStorage.removeItem("tmp-control-inheritance-parent-name")),a._reqSvc.doRequest(t).subscribe((function(e){a.additionalHeaderDescription='<div class="col-12"><p class="text-danger"><strong>IMPORTANT NOTE: If any of OPTION TYPE or ELEMENT TYPE has changed, for examples, changes from text to number or control list to textbox, it will delete all translations and its default value of that item. This will help alleviate data type conflicts. Also this process will not delete any item properties that was previously removed.</strong></p></div>';var t=a,n=[];a.customAfterTableDraw=function(e){a.updateDataTableSelectAllCheckbox(e.DataTable()),e.DataTable().off("select.control_inheritance").on("select.control_inheritance",(function(a,i,r,o){var c=e.DataTable().rows(o).data().toArray(),s=e.DataTable().rows(o).nodes();$('td:first-child input[type="checkbox"]',s).prop("checked",!0);var l=$.map(c,(function(e){return e.id}));n=$.unique($.merge(n,l)),t.updateDataTableSelectAllCheckbox(e.DataTable()),a.stopPropagation()})),e.DataTable().off("deselect.control_inheritance").on("deselect.control_inheritance",(function(a,i,r,o){var c=e.DataTable().rows(o).data().toArray(),s=e.DataTable().rows(o).nodes();$('td:first-child input[type="checkbox"]',s).prop("checked",!1);var l=$.map(c,(function(e){return e.id}));n=n.filter((function(e){return-1===l.indexOf(e)})),t.updateDataTableSelectAllCheckbox(e.DataTable()),a.stopPropagation()})),$('thead input[name="select_all"]',e.DataTable().table().container()).off("click.select_all").on("click.select_all",(function(a){t._ignoreSelectDeselectEvent=!0,$(a.currentTarget).prop("checked")?e.DataTable().rows().select():e.DataTable().rows().deselect(),t.updateDataTableSelectAllCheckbox(e.DataTable()),t._ignoreSelectDeselectEvent=!1,a.stopPropagation()}))};var i={data:e.data,rowId:"id",createdRow:function(e){$(e).addClass("pointer")},rowCallback:function(e,t){var a=t.id;-1!==n.indexOf(a)?$(e).find('input[type="checkbox"]').prop("checked",!0):$(e).find('input[type="checkbox"]').prop("checked",!1)},select:{style:"multi",selector:'td, td input[type="checkbox"]'},order:[[2,"asc"],[1,"asc"],[3,"asc"]],columns:[{title:'<input type="checkbox" class="form-check-input" name="select_all" value="1">',orderable:!1,searchable:!1,render:function(e,t,a){return'<input class="form-check-input" type="checkbox">'}},{data:"name",title:"Item Name"},{title:"Site",render:function(e,t,a){if(a.hasOwnProperty("template")){if(a.template.site)return a.template.site.domain_name}else if(a.hasOwnProperty("page")&&a.page.template.site)return a.page.template.site.domain_name;return a.site.domain_name}},{title:"Type",render:function(e,t,a){return a.hasOwnProperty("page_id")?"Page Item":a.hasOwnProperty("template_id")?"Template Item":"Global Item"}},{title:"Located in",render:function(e,t,a){return a.hasOwnProperty("template")?a.template.name:a.hasOwnProperty("page")?a.page.name:"-"}},{title:"Active",width:"150px",render:function(e,t,a){return a.hasOwnProperty("is_active")?'<div class="table-icon-wrapper">'+(a.is_active?'<i class="material-icons active-icon" aria-translate="tooltip.item_active" data-translate-tooltip="true">done</i>':'<i class="material-icons inactive-icon" aria-translate="tooltip.item_inactive" data-translate-tooltip="true">clear</i>')+"</div>":'<div class="table-icon-wrapper"><i class="material-icons text-muted" aria-translate="tooltip.unknown_status" data-translate-tooltip="true">indeterminate_check_box</i></div>'}}]};a.initTable(i)}),(function(e){var t={message:"message.load_list_error",type:o.k.ERROR};a._sncBar.open(t)}))}})),a}return n.a(t,e),t.prototype.updateDataTableSelectAllCheckbox=function(e){if(this._ignoreSelectDeselectEvent)return!1;var t=e.table().node(),a=e.rows({selected:!0}).count(),n=e.rows().count(),i=$('thead input[name="select_all"]',t);a<=0?(i.prop("checked",!1),i.prop("indeterminate",!1)):a===n?(i.prop("checked",!0),i.prop("indeterminate",!1)):(i.prop("checked",!0),i.prop("indeterminate",!0)),this.validSaveButtonState()},t.prototype.updateInheritances=function(){var e=this,t={title:{key:"dialog.update_inheritance_title"},expandableDialog:!0,dialogCssClass:"size-md",useCustomButtons:!1,template:{key:"message.update_inheritance_confirm"},buttons:[{text:{key:"common.update_inheritance_btn_confirm"},cssClass:"btn-primary",materialIcon:"save",closeWhenClick:!0,onClick:function(){setTimeout((function(){e._cmn.showAppLoader();var t={message:"message.update_inheritance_success",type:o.k.SUCCESS},a=e._dt.rows({selected:!0}).data().toArray(),n=Object.assign({},e.prepareUpdateInheritancePostData(a)),i=Object.assign({},c.a.url.control.updateInheritances);i.url=i.url.replace(/(:id)/g,e.parentId),e._reqSvc.doRequest(i,{postData:n,contentType:o.a.FORM}).subscribe((function(a){e._cmn.hideAppLoader(),a&&e._sncBar.open(t)}),(function(a){e._cmn.hideAppLoader(),t.message=a.message,t.type=o.k.ERROR,e._sncBar.open(t)}))}),200)}},{text:{key:"common.cancel"},cssClass:"btn-secondary",materialIcon:"close",closeWhenClick:!0}]};this._dlg.open(t)},t.prototype.validSaveButtonState=function(){var e=this,t=!1;this._dt&&(t=this._dt.rows({selected:!0}).count()>0),t?this._cmn.setInfo({navList:[{nav_text:"app_nav.controls",nav_link:"/controls"},{nav_text:"app_nav.control_property",nav_link:"/controls/"+this.parentId},{nav_text:"app_nav.control_update_inheritance_list",active:!0}],pageTitle:this.parentControlInheritanceName,topBarButtonList:[{btnText:"common.update",btnIcon:"save",btnClass:"btn-primary",onClick:function(t){e.updateInheritances()}}]}):this._cmn.setInfo({navList:[{nav_text:"app_nav.controls",nav_link:"/controls"},{nav_text:"app_nav.control_property",nav_link:"/controls/"+this.parentId},{nav_text:"app_nav.control_update_inheritance_list",active:!0}],pageTitle:this.parentControlInheritanceName,topBarButtonList:[{btnText:"common.update",btnIcon:"save",btnClass:"btn-primary",disabled:!0}]})},t.prototype.prepareUpdateInheritancePostData=function(e){var t={template_item_ids:[],page_item_ids:[],global_item_ids:[]};return e.length>0&&$.each(e,(function(e,a){a.hasOwnProperty("page_id")?t.page_item_ids.push(a.id):a.hasOwnProperty("template_id")?t.template_item_ids.push(a.id):t.global_item_ids.push(a.id)})),t},t=n.b([a.i(i._14)({selector:"[cmp-control-inheritance-list]",template:a(420)}),n.c("design:paramtypes",[i.h])],t)})(r.a)},957:function(e,t,a){"use strict";var n=a(4),i=a(2),r=a(419),o=a(9),c=a(16);a.d(t,"a",(function(){return s}));var s=(function(e){function t(t){var a=e.call(this,t)||this;return a.moduleType=o.l.CONTROL,a.pageType=o.x.MAIN_LIST,a.tableType=o.y.MODULE,a}return n.a(t,e),t.prototype.ngOnInit=function(){var e=this;this._cmn.setInfo({navList:[],pageTitle:"app_nav.controls",topBarButtonPosition:"right",topBarButtonList:[{btnText:"button.new_control",btnIcon:"add",btnClass:"btn-primary",onClick:function(){e.addNewItem()}}]})},t.prototype.ngAfterViewInit=function(){var e=this,t=Object.assign({},c.a.url.control.getAll);this._reqSvc.doRequest(t).subscribe((function(t){var a={data:t.data,columns:[{data:"name",title:"Control Name"},{title:"Detail",orderable:!1,searchable:!1,render:function(e,t,a){return'<div class="table-icon-wrapper"><a class="table-item-icon" role="edit" aria-function="edit-item" data-item-id="'+a.id+'"><i class="material-icons">edit</i></a><a class="table-item-icon" role="view" aria-function="view-child-item" data-item-id="'+a.id+'"><i class="material-icons">pageview</i></a><a class="table-item-icon" role="delete" aria-function="delete-item" data-item-id="'+a.id+'"><i class="material-icons">delete</i></a></div>'}}]};e.initTable(a)}),(function(){var t={message:"message.load_list_error",type:o.k.ERROR};e._sncBar.open(t)}))},t=n.b([a.i(i._14)({selector:"cmp-control-list",template:a(420)}),n.c("design:paramtypes",[i.h])],t)})(r.a)},958:function(e,t,a){"use strict";var n=a(4),i=a(2),r=a(419),o=a(9),c=a(16);a.d(t,"a",(function(){return s}));var s=(function(e){function t(t){var a=e.call(this,t)||this;return a.moduleType=o.l.CONTROL,a.pageType=o.x.PROPERTY_LIST,a.tableType=o.y.PROPERTY,a._acRoute.params.subscribe((function(e){if(e.id){a.parentId=e.id;var t=Object.assign({},c.a.url.control.getById);t.url=t.url.replace(/(:id)/g,a.parentId);var n=a._isDeveloper?[{btnText:"button.update_property_inheritance",btnIcon:"unarchive",btnClass:"btn-primary",onClick:function(e){e.preventDefault(),a._router.navigate(["controls/"+a.parentId+"/inheritances"])}},{btnText:"button.new_property",btnIcon:"add",btnClass:"btn-primary",onClick:function(){a.addNewItem()}}]:[{btnText:"button.new_property",btnIcon:"add",btnClass:"btn-primary",onClick:function(){a.addNewItem()}}];a._reqSvc.doRequest(t).subscribe((function(e){window.sessionStorage.setItem("tmp-control-inheritance-parent-name",e.data.name),e.result&&a._cmn.setInfo({navList:[{nav_text:"app_nav.controls",nav_link:"/controls"},{nav_text:"app_nav.control_property",active:!0}],pageTitle:e.data.name,topBarButtonList:n})})),a.initDataTable()}})),a}return n.a(t,e),t.prototype.initDataTable=function(){var e=this,t=Object.assign({},c.a.url.control.getOptionsByCtrlId);t.url=t.url.replace(/(:id)/g,this.parentId),this._reqSvc.doRequest(t).subscribe((function(t){if(t.data){var a=t.data;a.map((function(e){e.element_type!==o.p.TEXTBOX||/^(\{|\[)/g.test(e.element_value)||(e.element_value='{ "helper":"" }')}));var n={data:a,columns:[{data:"name",title:"Property Name",render:function(e,t,a){return'<span role="key-item-label">'+a.name+"</span>"}},{data:"option_value",title:"Value",render:function(t,a,n){return e._render.getPropertyElementValue({element_type:n.element_type,element_value:n.element_value},n.option_value)}},{data:"element_type",title:"Type",render:function(t,a,n){return e._render.getElementTypeName(n.element_type,n.element_value)}},{title:"",orderable:!1,searchable:!1,render:function(e,t,a){return'<div class="table-icon-wrapper"><a class="table-item-icon" role="edit" aria-function="edit-item" data-item-id="'+a.id+'"><i class="material-icons">edit</i></a><a class="table-item-icon" role="delete" aria-function="delete-item" data-item-id="'+a.id+'"><i class="material-icons">delete</i></a></div>'}}]};e.initTable(n)}}),(function(){var t={message:"message.load_list_error",type:o.k.ERROR};e._sncBar.open(t)}))},t=n.b([a.i(i._14)({selector:"[cmp-control-property-list]",template:a(420)}),n.c("design:paramtypes",[i.h])],t)})(r.a)},976:function(e,t,a){"use strict";var n=a(4),i=a(120),r=a(2),o=a(957),c=a(958),s=a(951),l=a(119),p=a(956);a.d(t,"a",(function(){return d}));var d=(function(e){function t(t){var a=e.call(this,t)||this;return a._pageTitle="Controls",a}return n.a(t,e),t.prototype.ngOnInit=function(){},t=n.b([a.i(r._14)({selector:"cmp-controls",template:a(952),entryComponents:[o.a,c.a,p.a,i.a,l.a]}),n.c("design:paramtypes",[r.h])],t)})(s.a)},988:function(e,t,a){"use strict";var n=a(4),i=a(90),r=a(422),o=a(2),c=a(26),s=a(989),l=a(976),p=a(957),d=a(421),u=a(958),m=a(956);a.d(t,"a",(function(){return _}));var _=(function(){function e(){}return e.routes=s.a,e=n.b([a.i(o.z)({declarations:[l.a,p.a,u.a,m.a],imports:[i.e,r.a,d.a,c.a.forChild(s.a)]})],e)})()},989:function(e,t,a){"use strict";var n=a(976),i=a(957),r=a(958),o=a(956);a.d(t,"a",(function(){return c}));var c=[{path:"",component:n.a,children:[{path:"",component:i.a},{path:":id",component:r.a},{path:":id/inheritances",component:o.a}]}]}});